(function(e,t,n,r){var i=n(e),s=n(t);BlackBox=function(e){var t={clickOutShake:!0};this.settings=t;if(e)for(var n in e)n in t&&(this.settings[n]=e[n]);this.close=function(){this._close()},is_box_open=!1},BlackBox.prototype.alert=function(e,t){this._createGap();var n="<div class = system><p>"+e+"</p></div>";this._createBox(n);var r=this._close;return this._createButton(_onConfirm=function(){r();try{t.onConfirm()}catch(e){typeof t=="function"&&t()}},!1,!1),!0},BlackBox.prototype.confirm=function(e,t){this._createGap();var n="<div class = system><p>"+e+"</p></div>";this._createBox(n);var r=this._close;return this._createButton(_onConfirm=function(){r();try{t.onConfirm()}catch(e){typeof t=="function"&&t()}},_onCancel=function(){r();try{t.onCancel()}catch(e){}},!1),!0},BlackBox.prototype.prompt=function(e,t,r){t=t?t:{},this._createGap();var i="<div class = system><p>"+e+"</p><p><input id=BlackBoxinput  /></p></div>";this._createBox(i);var s=n("input#BlackBoxinput");t["default"]&&s.attr("placeholder",t["default"]),s.focus();var o=this._close;return this._createButton(_onConfirm=function(){var e=s.val();if(!e&&!t.allownone)n("#BlackBoxContent").BlackBoxShake();else{o();try{r.onConfirm(e)}catch(i){typeof r=="function"&&r(e)}}},_onCancel=function(){o();try{r.onCancel()}catch(e){}}),!0},BlackBox.prototype.iframe=function(t,r,s){function o(){var e=i.width(),t=i.height();return width=r.width?Math.min(user_width,e-200):e-200,height=r.height?Math.min(user_height,t-150):t-150,$this=n("#BlackBoxIframe"),$this.attr({width:width,height:height}),[width,height]}this.load(),r=r?r:{},_result=o();var u='<iframe id="BlackBoxIframe"  frameborder="0" hspace="0" width='+_result[0]+" height="+_result[1]+" src="+t+(n.browser.msie?' allowtransparency="true"':"")+"></iframe>";this._createBox(u),$this=n("#BlackBoxIframe"),r.scrolling||$this.attr("scrolling","no"),r.forceload&&($this.hide(),$this.load(function(){n("#BlackBoxload").remove(),$this.show()})),n(e).resize(function(){o()});var a=this._close;this._createButton(!1,!1,_onClose=function(){a();try{s.onClose()}catch(e){typeof s=="function"&&s()}})},BlackBox.prototype.load=function(){function t(){var e=i.width(),t=i.height();n("#BlackBoxload").css({left:(e-n("#BlackBoxload").width())/2,top:(t-n("#BlackBoxload").height())/2})}this._createGap(),n("#BlackBox").append("<div id=BlackBoxload>载入中</div>"),t(),n(e).resize(function(){t()})},BlackBox.prototype.ready=function(){n("#BlackBox").remove()},BlackBox.prototype._init_=function(){n("#BlackBox").html()&&n("#BlackBox").remove(),is_box_open=!0},BlackBox.prototype._createButton=function(e,t,r){if(e||t)n("#BlackBoxContent > .Inner").append("<div id = actions></div>"),e&&(n(".Inner > #actions").prepend("<div class = confirm>确认</div>"),n("#actions > .confirm").click(function(){e()})),t&&(n(".Inner > #actions").prepend("<div class = cancel>取消</div>"),n("#actions > .cancel").click(function(){t()}));r},BlackBox.prototype._createBox=function(t){function s(){var e=i.width(),t=i.height(),r=n("#BlackBoxContent > .Inner").width()+18,s=n("#BlackBoxContent > .Inner").height()+18;n("#BlackBoxContent").css({left:(e-r)/2,top:(t-s)/2,width:r,height:s}),n("#BlackBoxContent > .Outer").css({width:r,height:s}).fadeTo(0,.6)}n("#BlackBox").append("<div id=BlackBoxContent></div>");var r="<div class = Outer></div><div class = Inner>"+t+"</div>";n("#BlackBoxContent").html(r).fadeIn("fast"),s(),this.settings.clickOutShake&&n("#BlackBoxGap").click(function(){n("#BlackBoxContent").BlackBoxShake()}),n(e).resize(function(){s()})},BlackBox.prototype._createGap=function(){function r(){var r=i.width(),s=i.height();n("#BlackBoxGap").css({width:r,height:s}).fadeTo(0,.6),n.browser.msie&&n.browser.version=="6.0"&&n(e).scroll(function(){n("#BlackBox").css({position:"absolute",top:n(t).scrollTop()})})}this._init_(),n("body").append("<div id=BlackBox><div id=BlackBoxGap></div></div>"),r(),n(e).resize(function(){r()})},BlackBox.prototype._close=function(){is_box_open&&n("#BlackBox").remove(),is_box_open=!1},n.BlackBox=BlackBox,n.fn.extend({BlackBoxShake:function(){var e=n(this),t=e.offset().left;for(var r=1;4>=r;r++)e.animate({left:t-(12-3*r)},50),e.animate({left:t+2*(12-3*r)},50)}})})(window,document,jQuery)